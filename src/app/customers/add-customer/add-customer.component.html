<div class="app-main__inner">
    <div class="app-page-title add-project-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">
                Add Customers
            </div>
        </div>
    </div>

    <div class="tab-content">
        <div class="tab-pane tabs-animation fade show active" id="tab-content-0" role="tabpanel">
            <div class="row">
                <div class="col-md-12">
                    <div class="main-card mb-3 card">
                        <div class="card-body">
                            <form [formGroup]="addCustomerForm" (ngSubmit)="submit(addCustomerForm.value)">
                                <!-- <div class="row" style="text-align: center;font-weight: 500;font-size:x-large;">
                                    <mat-label>Add Customer Form</mat-label>
                                </div> -->
                                <mat-accordion>
                                    <ng-container formGroupName="customer">
                                        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Primary Contact Information
                                                </mat-panel-title>
                                                <!-- <mat-panel-description>
                                          This is a summary of the content
                                        </mat-panel-description> -->
                                            </mat-expansion-panel-header>

                                            <div class="row">
                                                <div class="col-md-4"></div>
                                                <div class="col-md-4"></div>
                                                <div class="col-lg-4 col-xl-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="Leadid">
                                                        <mat-label>Lead Reference Id</mat-label>
                                                        <input matInput formControlName="lead_id" type="text"
                                                            class="searchBox" placeholder="Lead"
                                                            value="{{LeadName}} , {{Phone}}"
                                                            (keyup)="search_Lead($event)">
                                                    </mat-form-field>
                                                    <div *ngIf="isLead" class="existing-token-dropdown">
                                                        <ul class="nav" *ngFor="let lead of LeadData">
                                                            <li class="nav-item exist-token-list"
                                                                (click)="GetLead(lead.id)"> {{lead.first_name}}
                                                                {{lead.middle_name}}
                                                                {{lead.last_name}} <br /> {{lead.phone}}</li>
                                                        </ul>
                                                    </div>
                                                    <p class="no_record" *ngIf="noRecords">No record found!</p>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="first_name">
                                                        <mat-label>Name *</mat-label>
                                                        <input matInput placeholder="Name" name="name"
                                                            value="{{FullName}}" (click)="openNameField()" readonly>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Gender *</mat-label>
                                                        <mat-select formControlName="gender">
                                                            <mat-option value="Male">Male</mat-option>
                                                            <mat-option value="Female">Female</mat-option>
                                                            <mat-option value="Others">Others </mat-option>
                                                        </mat-select>
                                                        <mat-error
                                                            *ngIf="addCustomerForm.get(['customer','gender'])?.touched">
                                                            Select
                                                            Gender
                                                        </mat-error>
                                                    </mat-form-field>

                                                </div>
                                                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="e_mail">
                                                        <mat-label>E-mail</mat-label>
                                                        <input matInput formControlName="email" placeholder="E-mail"
                                                            type="email">
                                                    </mat-form-field>
                                                    <!-- <mat-error *ngIf="addCustomerForm.get('email')?.touched">E-mail id required
                                                    </mat-error> -->

                                                </div>
                                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="ph_no">
                                                        <mat-label>Phone * </mat-label>
                                                        <input (keypress)="numberOnly($event)" matInput
                                                            formControlName="phone" maxlength="10" placeholder="Phone"
                                                            type="text">
                                                        <mat-error
                                                            *ngIf="addCustomerForm.get(['customer','phone'])?.touched">
                                                            Phone
                                                            Number is required </mat-error>
                                                    </mat-form-field>

                                                </div>
                                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="ph_no">
                                                        <mat-label>Alternate Phone</mat-label>
                                                        <input (keypress)="numberOnly($event)" matInput
                                                            formControlName="alternate_phone" maxlength="10"
                                                            placeholder="Alternate Phone" type="text">
                                                    </mat-form-field>
                                                </div>

                                            </div>
                                            <!-- add current address -->
                                            <mat-expansion-panel hideToggle>
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Current Address
                                                    </mat-panel-title>
                                                    <!-- <mat-panel-description>
                                                  This is a summary of the content
                                                </mat-panel-description> -->
                                                </mat-expansion-panel-header>
                                                <ng-container formGroupName="current_address">
                                                    <div class="row">
                                                        <div class="col-lg-8 col-xl-8 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Current Address *</mat-label>
                                                                <textarea formControlName="address" rows="1" matInput
                                                                    [(ngModel)]="Address"
                                                                    placeholder="Current Address"></textarea>
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','current_address','address'])?.touched">
                                                                    Address is required </mat-error>
                                                            </mat-form-field>

                                                        </div>
                                                        <div class="col-lg-4 col-xl-4 col-md-12 col-sm-12 col-xs-12 ">
                                                            <mat-form-field appearance="outline" id="PinField1">
                                                                <mat-label>Pin Code *</mat-label>
                                                                <input matInput formControlName="postal_code" #pinCode
                                                                    (keypress)="numberOnly($event)" maxlength="6"
                                                                    [(ngModel)]="PostalCode"
                                                                    (ngModelChange)="onChange($event)" placeholder="">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','current_address','postal_code'])?.touched">
                                                                    Pincode is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                            <p *ngIf="postalError">{{postalMsg}}</p>

                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>City *</mat-label>
                                                                <!-- <input matInput formControlName="city"
                                                                [(ngModel)]="City" placeholder="City" type="text"> -->
                                                                <input matInput formControlName="city"
                                                                    [(ngModel)]="City" placeholder="City" type="text">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','current_address','city'])?.touched">
                                                                    City is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>State *</mat-label>
                                                                <!-- <input matInput formControlName="state"
                                                                    [(ngModel)]="State" placeholder="State" type="text"> -->
                                                                <input matInput formControlName="state"
                                                                    [(ngModel)]="State" placeholder="State" type="text">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','current_address','state'])?.touched">
                                                                    State is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Country *</mat-label>
                                                                <!-- <input matInput formControlName="country"
                                                                    [(ngModel)]="Country" placeholder="Country"
                                                                    type="text"> -->
                                                                <input matInput formControlName="country"
                                                                    [(ngModel)]="Country" placeholder="Country"
                                                                    type="text">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','current_address','country'])?.touched">
                                                                    Country is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </mat-expansion-panel>

                                            <!-- add permanent address -->
                                            <mat-expansion-panel (opened)="panelOpenState = true"
                                                (closed)="panelOpenState = false">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Permanent Address
                                                    </mat-panel-title>
                                                    <!-- <mat-panel-description>
                                                    This is a summary of the content
                                                  </mat-panel-description> -->
                                                </mat-expansion-panel-header>
                                                <mat-checkbox name="checkAddress" (change)="selectAddress($event);"
                                                    class="example-margin">Same as current address
                                                </mat-checkbox>
                                                <ng-container formGroupName="permanent_address">
                                                    <div class="row">
                                                        <div class="col-lg-8 col-xl-8 col-md-12 col-sm-12 col-xs-12 ">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Permanent Address *</mat-label>
                                                                <textarea formControlName="address" rows="1" matInput
                                                                    value="{{P_Address}}"
                                                                    placeholder="Permanent Address"></textarea>
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','permanent_address','address'])?.touched">
                                                                    Address is required
                                                                </mat-error>
                                                            </mat-form-field>

                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline" id="PinField1">
                                                                <mat-label>Pin Code *</mat-label>
                                                                <input matInput formControlName="postal_code" #pinCode1
                                                                    [(ngModel)]="P_pinValue" value="{{P_PostalCode}}"
                                                                    (ngModelChange)="onChangeCustomerPermanent($event)"
                                                                    placeholder="" (keypress)="numberOnly($event)"
                                                                    maxlength="6">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','permanent_address','postal_code'])?.touched">
                                                                    Pincode is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                            <p *ngIf="postalError">{{postalMsg}}</p>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>City *</mat-label>
                                                                <input matInput formControlName="city"
                                                                    value="{{P_City}}" placeholder="City" type="text">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','permanent_address','city'])?.touched">
                                                                    city is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>State *</mat-label>
                                                                <input matInput formControlName="state"
                                                                    value="{{P_State}}" placeholder="State" type="text">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','permanent_address','state'])?.touched">
                                                                    State is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Country *</mat-label>
                                                                <input matInput formControlName="country"
                                                                    value="{{P_Country}}" placeholder="State"
                                                                    type="text">
                                                                <mat-error
                                                                    *ngIf="addCustomerForm.get(['customer','permanent_address','country'])?.touched">
                                                                    Country is required
                                                                </mat-error>
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </mat-expansion-panel>

                                            <!--add document -->
                                            <mat-expansion-panel (opened)="panelOpenState = true"
                                                (closed)="panelOpenState = false">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Documents
                                                    </mat-panel-title>

                                                </mat-expansion-panel-header>
                                                <div class="row">
                                                    <ng-container formArrayName="documents">
                                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12"> Add Documents List:</div>
                                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <button mat-mini-fab type="button" color="primary"
                                                                (click)="addDocument()"
                                                                aria-label="Example icon button with a menu icon">
                                                                <mat-icon>add</mat-icon>
                                                            </button>
                                                        </div>

                                                        <div *ngFor="let document of documents().controls; let i=index"
                                                            [formGroupName]="i">
                                                            <div class="row">
                                                                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12">
                                                                    <mat-form-field appearance="outline">
                                                                        <mat-label>Type</mat-label>
                                                                        <mat-select formControlName="type"
                                                                            (selectionChange)="GetValue($event)">
                                                                            <mat-option value="Adhaar Card">
                                                                                Aadhar-card
                                                                            </mat-option>
                                                                            <mat-option value="Driving License">
                                                                                Driving
                                                                                License
                                                                            </mat-option>
                                                                            <mat-option value="Pan Card">Pan Card
                                                                            </mat-option>
                                                                            <mat-option value="Passport">Passport
                                                                            </mat-option>
                                                                            <mat-option value="Passsbook">Passsbook
                                                                            </mat-option>
                                                                            <mat-option value="Ration Card">Ration
                                                                                Card
                                                                            </mat-option>
                                                                            <mat-option value="Voter Id">Voter Id
                                                                                Card
                                                                            </mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                    <mat-form-field appearance="outline" id="doc_type">
                                                                        <mat-label>Document Number</mat-label>
                                                                        <input matInput maxlength="{{docLength}}"
                                                                            formControlName="number" placeholder=""
                                                                            type="text">
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                    <div class="form-group">
                                                                        <input type="file" style="display: none;"
                                                                            multiple (change)="readURL($event,i)"
                                                                            class="form-control-file"
                                                                            id="exampleFormControlFile1" #file>
                                                                        <i class="fas fa-upload"
                                                                            (click)="file.click()"></i>
                                                                        Choose
                                                                        Document Image
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-md-2 doc-img-col"
                                                                            *ngFor='let url of images; let i = index'>
                                                                            <img class="doc-img" [src]="url.url"
                                                                                title="{{url.name}}" alt="" width="60px"
                                                                                height="60px">
                                                                            <span>
                                                                                <mat-icon (click)="deleteImg(i)"
                                                                                    class="close-btn">
                                                                                    close
                                                                                </mat-icon>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <button mat-mini-fab type="button" color="warn"
                                                                (click)="removeDocument(i)"
                                                                aria-label="Example icon button with a menu icon">
                                                                <mat-icon>clear</mat-icon>
                                                            </button>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                                <!-- </ng-container> -->
                                                <!-- <ng-container formGroupName="document">
                                                   
                                                      
                                                        <div *ngFor="let value of values;">
                                                            {{ value.value }}
                                                        </div>
                                                       
                                                    </div>
                                                </ng-container> -->
                                            </mat-expansion-panel>

                                        </mat-expansion-panel>
                                    </ng-container>
                                </mat-accordion>
                                <mat-accordion>
                                    <ng-container formGroupName="secondaryContact">
                                        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>

                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Secondary Contact Information
                                                </mat-panel-title>
                                                <!-- <mat-panel-description>
                                          This is a summary of the content
                                        </mat-panel-description> -->
                                            </mat-expansion-panel-header>

                                            <div class="row">
                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="first_name">
                                                        <mat-label>Name *</mat-label>
                                                        <input matInput placeholder="Name" value="{{SecondaryFullName}}"
                                                            (click)="openSecondaryNameField()" readonly>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Gender *</mat-label>
                                                        <mat-select formControlName="gender">
                                                            <mat-option value="Male">Male</mat-option>
                                                            <mat-option value="Female">Female</mat-option>
                                                            <mat-option value="Others">Others </mat-option>
                                                        </mat-select>
                                                        <mat-error
                                                            *ngIf="addCustomerForm.get(['secondaryContact','gender'])?.touched">
                                                            Gender is required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="e_mail">
                                                        <mat-label>Relation with Customer</mat-label>
                                                        <input formControlName="relation_with_customer" matInput
                                                            placeholder="Relation with Customer" type="text">
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="e_mail">
                                                        <mat-label>E-mail</mat-label>
                                                        <input formControlName="email" matInput placeholder="E-mail"
                                                            type="email">
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="ph_no">
                                                        <mat-label>Phone *</mat-label>
                                                        <input (keypress)="numberOnly($event)" formControlName="phone"
                                                            matInput maxlength="10" placeholder="Phone" type="text">
                                                        <mat-error
                                                            *ngIf="addCustomerForm.get(['secondaryContact','phone'])?.touched">
                                                            Phone Number is required
                                                        </mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                    <mat-form-field appearance="outline" id="ph_no">
                                                        <mat-label>Alternate Phone</mat-label>
                                                        <input (keypress)="numberOnly($event)"
                                                            formControlName="alternate_phone" matInput maxlength="10"
                                                            placeholder="Alternate Phone" type="text">
                                                    </mat-form-field>
                                                </div>
                                            </div>

                                            <!-- add current address -->
                                            <mat-expansion-panel hideToggle>
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Current Address
                                                    </mat-panel-title>
                                                    <!-- <mat-panel-description>
                                                  This is a summary of the content
                                                </mat-panel-description> -->
                                                </mat-expansion-panel-header>
                                                <ng-container formGroupName="current_address">
                                                    <div class="row">
                                                        <div class="col-lg-8 col-xl-8 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Current Address</mat-label>
                                                                <textarea formControlName="address" rows="1" matInput
                                                                    [(ngModel)]="Address1"
                                                                    placeholder="Current Address"></textarea>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Pincode</mat-label>
                                                                <!-- <input formControlName="postal_code" matInput
                                                                    [(ngModel)]="PostalCode1" placeholder="Pincode"
                                                                    type="text"> -->
                                                                <input matInput formControlName="postal_code" #pinCode
                                                                    [(ngModel)]="PostalCode1"
                                                                    (keypress)="numberOnly($event)" maxlength="6"
                                                                    (ngModelChange)="onChangeSecondaryCustomer($event)"
                                                                    placeholder="">
                                                            </mat-form-field>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>City</mat-label>
                                                                <input matInput placeholder="City" [(ngModel)]="City1"
                                                                    formControlName="city" type="text">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>State</mat-label>
                                                                <input matInput placeholder="State" [(ngModel)]="State1"
                                                                    formControlName="state" type="text">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Country</mat-label>
                                                                <input matInput placeholder="Country"
                                                                    [(ngModel)]="Country1" formControlName="country"
                                                                    type="text">
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </mat-expansion-panel>

                                            <!-- add permanent address -->
                                            <mat-expansion-panel (opened)="panelOpenState = true"
                                                (closed)="panelOpenState = false">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Permanent Address
                                                    </mat-panel-title>
                                                    <!-- <mat-panel-description>
                                                    This is a summary of the content
                                                  </mat-panel-description> -->
                                                </mat-expansion-panel-header>
                                                <ng-container formGroupName="permanent_address">
                                                    <mat-checkbox (change)="selectSecondaryAddress($event);"
                                                        class="example-margin">Same as current address
                                                    </mat-checkbox>
                                                    <div class="row">
                                                        <div class="col-lg-8 col-xl-8 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Permanent Address</mat-label>
                                                                <textarea formControlName="address" rows="1" matInput
                                                                    value="{{S_Address}}"
                                                                    placeholder="Permanent Address"></textarea>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Pincode</mat-label>
                                                                <!-- <input formControlName="postal_code" matInput
                                                                    value="{{S_PostalCode}}" placeholder="Pincode"
                                                                    type="text"> -->
                                                                <input matInput formControlName="postal_code" #pinCode
                                                                    [(ngModel)]="SP_pinValue" value="{{S_PostalCode}}"
                                                                    (keypress)="numberOnly($event)" maxlength="6"
                                                                    (ngModelChange)="onChangeSecondaryCustomerPermanent($event)"
                                                                    placeholder="">
                                                            </mat-form-field>
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>City</mat-label>
                                                                <input formControlName="city" matInput
                                                                    value="{{S_City}}" placeholder="City" type="text">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>State</mat-label>
                                                                <input formControlName="state" matInput
                                                                    value="{{S_State}}" placeholder="State" type="text">
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Country</mat-label>
                                                                <input formControlName="country" matInput
                                                                    value="{{S_Country}}" placeholder="Country"
                                                                    type="text">
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </mat-expansion-panel>

                                            <!--add document -->
                                            <mat-expansion-panel (opened)="panelOpenState = true"
                                                (closed)="panelOpenState = false">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Documents
                                                    </mat-panel-title>

                                                </mat-expansion-panel-header>



                                                <div class="row">
                                                    <ng-container formArrayName="documents">
                                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12"> Add Documents List:</div>
                                                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                                            <button mat-mini-fab type="button" color="primary"
                                                                (click)="addDocumentsSecondary()"
                                                                aria-label="Example icon button with a menu icon">
                                                                <mat-icon>add</mat-icon>
                                                            </button>
                                                        </div>

                                                        <div *ngFor="let document of documentsSecondary().controls; let i=index"
                                                            [formGroupName]="i">
                                                            <div class="row">
                                                                <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                    <mat-form-field appearance="outline">
                                                                        <mat-label>Type</mat-label>
                                                                        <mat-select formControlName="type"
                                                                            (selectionChange)="GetValue($event)">
                                                                            <mat-option value="Adhaar Card">
                                                                                Aadhar-card
                                                                            </mat-option>
                                                                            <mat-option value="Driving License">
                                                                                Driving
                                                                                License
                                                                            </mat-option>
                                                                            <mat-option value="Pan Card">Pan Card
                                                                            </mat-option>
                                                                            <mat-option value="Passport">Passport
                                                                            </mat-option>
                                                                            <mat-option value="Passsbook">Passsbook
                                                                            </mat-option>
                                                                            <mat-option value="Ration Card">Ration
                                                                                Card
                                                                            </mat-option>
                                                                            <mat-option value="Voter Id">Voter Id
                                                                                Card
                                                                            </mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12">
                                                                    <mat-form-field appearance="outline" id="doc_type">
                                                                        <mat-label>Document Number</mat-label>
                                                                        <input matInput maxlength="{{docLength}}"
                                                                            formControlName="number" placeholder=""
                                                                            type="text">
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                    <div class="form-group">
                                                                        <input type="file" style="display: none;"
                                                                            (change)="readURLSecondaryCustomer($event)"
                                                                            class="form-control-file"
                                                                            id="exampleFormControlFile1" #file1>
                                                                        <i class="fas fa-upload"
                                                                            (click)="file1.click()"></i>
                                                                        Choose
                                                                        Document Image
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-md-2 doc-img-col"
                                                                            *ngFor='let url of imagesSecondary; let i = index'>
                                                                            <img class="doc-img" [src]="url.url"
                                                                                title="{{url.name}}" alt="" width="60px"
                                                                                height="60px">
                                                                            <span>
                                                                                <mat-icon
                                                                                    (click)="deleteImgSecondary(i)"
                                                                                    class="close-btn">
                                                                                    close
                                                                                </mat-icon>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <button mat-mini-fab type="button" color="warn"
                                                                (click)="removedocumentSecondary(i)"
                                                                aria-label="Example icon button with a menu icon">
                                                                <mat-icon>clear</mat-icon>
                                                            </button>
                                                        </div>
                                                    </ng-container>
                                                </div>



                                            </mat-expansion-panel>

                                        </mat-expansion-panel>
                                    </ng-container>
                                </mat-accordion>

                                <mat-accordion>
                                    <mat-expansion-panel hideToggle>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Property Details *
                                                <h4 [style.display]="showProperty" class="details"
                                                    style="color: red;position: relative;left: 500px;">Please
                                                    select Property *</h4>
                                            </mat-panel-title>
                                            <mat-panel-description>
                                                <!-- This is a summary of the content -->
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <div class="row">
                                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"></div>
                                            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                                <p class="btn btn-light" (click)="viewPreBookings()">View Prebookings
                                                </p>
                                            </div>
                                            
                                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                <p class="viewPreBook"  class="btn btn-light" (click)="newBooking()">Now Booking</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            
                                            <ng-container formGroupName="property" >
                                                <div class="carousel-item active">
                                                    <div class="main-card mb-3 card PrebookingCard">
                                                        <div class="card-body">
                                                            <p class="PropertyNo">{{PropertyNumber}}</p>
                                                            <p class="payment">{{PreBookingPaymentType}}</p>
                                                            <p class="offer">{{PreBookingOfferName}}</p>
                                                            <p class="finalized_property_price">{{FinalizedPrice}}</p>
                                                            <p class="commitment">{{PreBookingCommitment}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                    
                                        </div>

                                    </mat-expansion-panel>
                                </mat-accordion>
                                <mat-accordion>
                                    <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Booking Details
                                            </mat-panel-title>
                                            <mat-panel-description>
                                                <!-- This is a summary of the content -->
                                            </mat-panel-description>
                                        </mat-expansion-panel-header>
                                        <ng-container formGroupName="payment">
                                            <div class="carousel-item active">
                                                <div class="main-card mb-3 card PrebookingCard">
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <ng-container formGroupName="payment_type">
                                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                    <mat-form-field appearance="outline"
                                                                        id="Payment_Type">
                                                                        <mat-label>Payment Via type *</mat-label>
                                                                        <mat-select
                                                                            (selectionChange)="GetPaymentType($event)">
                                                                            <mat-option value="Full">Full</mat-option>
                                                                            <mat-option value="Installment">Installment
                                                                            </mat-option>
                                                                            <!-- <mat-option value="Online">Online
                                                                            </mat-option> -->

                                                                             <!-- <mat-option *ngFor="let pay of PayVia"
                                                                                [value]="{id: pay.id, name: pay.name}">

                                                                                {{pay.name}}</mat-option>  -->
                                                                            
                                                                                <mat-error
                                                                        *ngIf="addCustomerForm.get(['property','payment_type'])?.touched">
                                                                        Please select Payment method
                                                                    </mat-error>

                                                                        </mat-select>
                                                                      
                                                                       
                                                                    
                                                                    </mat-form-field>
                                                                </div>
                                                            </ng-container>
                                                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline" id="bookAmount">
                                                                    <mat-label>Booking Amount *</mat-label>
                                                                    <input formControlName="booking_amount" matInput
                                                                        class="rupee" placeholder="Booking Amount"
                                                                        type="text">
                                                                    <mat-error
                                                                        *ngIf="addCustomerForm.get(['payment','booking_amount'])?.touched">
                                                                        Booking Amount is required
                                                                    </mat-error>
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline" id="bookDate">
                                                                    <mat-label>Booking Date</mat-label>
                                                                    <input matInput [matDatepicker]="picker"
                                                                        formControlName="booking_date"
                                                                        placeholder="Booking Date">
                                                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                                                    </mat-datepicker-toggle>
                                                                    <mat-datepicker #picker></mat-datepicker>
                                                                </mat-form-field>
                                                            </div>
                                                           
                                                            <ng-container formGroupName="payment_via">
                                                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                    <mat-form-field appearance="outline"
                                                                        id="PaymentVia_Type">
                                                                        <mat-label>Payment Via *</mat-label>
                                                                        <mat-select
                                                                            (selectionChange)="GetPaymentViaType($event)">
                                                                            <!-- <mat-option value="Cash">Cash</mat-option>
                                                                            <mat-option value="Cheque">Cheque
                                                                            </mat-option>
                                                                            <mat-option value="Online">Online
                                                                            </mat-option> -->

                                                                            <mat-option *ngFor="let pay of PayVia"
                                                                                [value]="{id: pay.id, name: pay.name}">

                                                                                {{pay.name}}</mat-option>
                                                                            
                                                                                <mat-error
                                                                        *ngIf="addCustomerForm.get(['payment','payment_via'])?.touched">
                                                                        Please select Payment method
                                                                    </mat-error>

                                                                        </mat-select>
                                                                      
                                                                       
                                                                    
                                                                    </mat-form-field>
                                                                </div>
                                                            </ng-container>
                                                        </div>

                                                        <div class="row" [style.display]="showChequeInfo">
                                                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline" id="chequeType">
                                                                    <mat-label>Cheque Type</mat-label>
                                                                    <mat-select formControlName="type">
                                                                        <mat-option value="Current">Current Cheque
                                                                        </mat-option>
                                                                        <mat-option value="Post">Post Cheque
                                                                        </mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline" id="chequeNumber">
                                                                    <mat-label>Cheque Number</mat-label>
                                                                    <input (keypress)="numberOnly($event)" maxlength="6"
                                                                        formControlName="number" matInput
                                                                        placeholder="Cheque Number" type="text">
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline"
                                                                    id="ChequeSubmissionDate">
                                                                    <mat-label>Cheque Submission Date</mat-label>
                                                                    <input matInput
                                                                        formControlName="cheque_submission_date"
                                                                        [matDatepicker]="picker1">
                                                                    <mat-datepicker-toggle matSuffix [for]="picker1">
                                                                    </mat-datepicker-toggle>
                                                                    <mat-datepicker #picker1></mat-datepicker>
                                                                </mat-form-field>
                                                            </div>
                                                        </div>

                                                        <div class="row" [style.display]="showTransactionNumber">
                                                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline"
                                                                    id="Transaction_Id">
                                                                    <mat-label>Transaction Id</mat-label>
                                                                    <input formControlName="transaction_id" matInput
                                                                        placeholder="Transaction Id" type="text">
                                                                </mat-form-field>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </mat-expansion-panel>
                                </mat-accordion>
          
                                <button type="submit" style="float: right;"
                                    class="mt-1 btn btn-primary button-width">Submit</button>
                               


                                <!-- <button mat-mini-fab type="button" color="primary" (click)="addInstallment()"
                                    aria-label="Example icon button with a menu icon">
                                    <mat-icon>add</mat-icon>
                                </button> -->

                                <!-- <button type="button" (click)="addAlternateDocument()">Add Alternate</button>
                                        <div formArrayName="alternateDocument" *ngFor="let document of alternateDocument.controls let i=index">
                                            <input type="text" matInput [formControlName]="i">
                                        </div> -->




                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>