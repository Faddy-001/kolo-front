<div class="app-main__inner">
    <div class="app-page-title add-project-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">
                Prebooking
            </div>
            <i class="pe-7s-close close-icon" (click)="close()"></i>
        </div>
    </div>

    <div class="tab-content">
        <div class="tab-pane tabs-animation fade show active" id="tab-content-0" role="tabpanel">
            <div class="row">
                <div class="col-md-12">
                    <div class="main-card mb-3 card">
                        <div class="card-body">
                            <form>
                                <div class="row">
                                    <div class="col-md-6">

                                        <mat-form-field appearance="outline">
                                            <mat-label>Property Number</mat-label>
                                            <input matInput type="text" class="searchBox" [value]="prop_number"
                                                placeholder="Search..." (click)="$event.stopPropagation()"
                                                (keyup)="search_PropertyNo($event)" autocomplete="off">
                                        </mat-form-field>
                                        <div *ngIf="isProperty" class="existing-token-dropdown">
                                            <ul class="nav" *ngFor="let prop_name of newProperties">
                                                <li class="nav-item exist-token-list"
                                                    (click)="GetPropertyPrice(prop_name)">{{prop_name.number}}</li>
                                            </ul>
                                        </div>
                                        <p class="no_record" *ngIf="noRecords">No record found!</p>
                                    </div>

                                    <div class="col-md-6">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Payment Type </mat-label>
                                            <mat-select (selectionChange)="getType($event)">
                                                <mat-option value="Full">Full</mat-option>
                                                <mat-option value="Installment">Installment</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Commitment</mat-label>
                                            <textarea (change)="commitDesc($event)" matInput
                                                class="remarkField"></textarea>
                                            <input type="file" (change)="getImage($event)" style="display: none;"
                                                class="form-control-file" id="exampleFormControlFile1" #file />
                                            <span class="material-icons" (click)="file.click()"
                                                style="float: right; position: relative;bottom:30px;right: 20px;;font-size: 20px;color:#68bfbb">
                                                attach_file
                                            </span>
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2 doc-img-col" *ngFor='let url of images; let i = index'>
                                        <img class="doc-img" [src]="url.url" title="{{url.name}}" alt="" width="60"
                                            height="60">
                                        <span>
                                            <mat-icon (click)="deleteImg(i)" class="close-btn">close</mat-icon>
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <a mat-button (click)="showOffer();"
                                        style="text-decoration: underline;color: #1c5351; margin-bottom:2rem;">View
                                        Offers</a>
                                </div>
                                <span *ngIf="spanerr"
                                    style="color: #ce7575;position:relative;top:4px;left: 10px;">Please Select
                                    Property!!</span>
                                <div [style.display]="show_offer">
                                    <table id="example" role="table">
                                        <thead role="rowgroup">
                                            <tr role="row">
                                                <th role="columnheader">Select</th>
                                                <th role="columnheader">Number</th>
                                                <th role="columnheader">Name</th>
                                                <th role="columnheader">Type</th>
                                                <th role="columnheader">Benefit</th>
                                                <th role="columnheader">Counts </th>
                                            </tr>
                                        </thead>
                                        <tbody role="rowgroup">

                                            <tr role="row" *ngFor="let offers of offerDetail">
                                                <td role="cell">
                                                    <input type="checkbox" id="getCheck" (change)="selectOffer($event);"
                                                        [(ngModel)]="offers.checked" name="checkOffer"
                                                        value="{{offers.id}}" class="example-margin">
                                                </td>
                                                <td role="cell">{{offers.number}} </td>
                                                <td role="cell">{{offers.name}} </td>
                                                <td role="cell">{{offers.type}}</td>
                                                <td role="cell">{{offers.benefit}}</td>
                                                <td role="cell">{{offers.counts}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="xyz" [style.Display]="show_offer">
                                    <mat-form-field appearance="outline" id="NameField">
                                        <mat-label>Final Price</mat-label>
                                        <input matInput value="{{getFinalPrice}}" placeholder=" ">
                                    </mat-form-field>

                                </div>
                                <div class="xyz" [style.Display]="show_offer">
                                    <mat-label style="text-align: center;color:Blue;font-size: medium;">
                                        {{Offer_Benefit}}</mat-label>
                                </div>

                                <button type="submit" class="mt-1 btn btn-primary"
                                    [style.display]="ShowNowBookLeadavaialble" (click)="saveData()"
                                    routerLink="/layout/customers/add-customer/{{leadId}}" style="float: right;">Now
                                    Booking</button>

                                <button type="submit" class="mt-1 btn btn-primary"
                                    [style.display]="ShowsaveforlaterBookLeadavaialble" (click)="saveData()"
                                    style="margin: 0rem 1rem;float: right;">Save for later</button>

                                <button type="submit" class="mt-1 btn btn-primary" [style.display]="ShowNotLead"
                                    (click)="ProceedtoBooking()" style="float: right;"
                                    style="margin: 0rem 1rem;float: right;">Proceed to Booking
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>