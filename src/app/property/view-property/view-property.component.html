<div class="app-main__inner ">
    <div class="page-title-wrapper">
        <div class="page-title-heading" [style.display]="showHead">
            Edit Property
        </div>

    </div>

    <!-- View Property Template Starts Here -->
    <div class="open-display" *ngIf="!edit">


        <div class="set-icon">
            <!-- <i class="pe-7s-close close-icon" (click)="close()"></i> -->
            <mat-icon class="close-icon" (click)="close()">close</mat-icon>
            <!-- <i class="fas fa-edit edit-button" (click)="editProperty()"></i> -->
            <mat-icon class="edit-button" (click)="editProperty()">edit</mat-icon>
        </div>

        <div class="col-md-12">
            <div class="row font_color" style="margin-bottom: 15px;">
                <h1 style="text-align: center;">{{Property_Number}}</h1>
            </div>
        </div>
        <!-- <div class="row img-margin">
            <div class="col-md-3 doc-img-col"
                *ngFor='let url of PropertyImages;'>
                <img class="doc-img" [src]="url.src" title="{{url.name}}" alt=""
                    width="60" height="60">

            </div>
        </div> -->

        <div class="col-lg-12">
            <div class="profile-center">
                <div id="carouselExampleIndicators"  class="carousel slide" data-interval="false">
                    <div class="carousel-inner">
                         <ng-container *ngFor="let url of PropertyImages">
                        <div *ngIf="url==index" class="carousel-item active">
                            <img [src]="url.src" alt=""  title="{{url.title}}" class="image-view">
                        </div>
                        <div *ngIf="url!=index" class="carousel-item">
                            <img [src]="url.src" alt=""  title="{{url.title}}" alt="" class="image-view">
                        </div>
                    </ng-container> 
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <mat-icon style=" color: #46a29d;;font-weight: 500;font-size: 35px;" aria-hidden="false" aria-label="Example home icon">navigate_next</mat-icon>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="section-part">
            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title"> Project Name : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{ProjectName}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->

            <!-- <div class="row ">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title"> Property Type : </h3>
                </div>
                <div class="col-md-5 font_color">
                    <p>{{Property_typeName}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->
            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Property Name : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{Property_Name}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->
            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Length : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{Length}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->
            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Breadth : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{Breadth}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->
            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Total Area : </h3>
                </div>
                <div class="col-md-5 font_color">
                    <p>{{TotalArea}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->

            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Rate per sq/ft : </h3>
                </div>
                <div class="col-md-5 font_color">
                    <p>{{Ratepersq_ft}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->

            <!-- <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Total Price : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{Price}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Description : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{Desc}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-3">
                    <h3 class="title">Status : </h3>
                </div>
                <div class="col-md-5  font_color">
                    <p>{{Status}}</p>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="line"></div>
                    </div>
                </div>
            </div> -->



            <!-- for practice -->
            <section class=" titled">
                <h4 class="title col-md-8">Project Name : </h4>
                <span class="tag col-md-4">{{ProjectName}}</span>
            </section>
            <section class="titled">
                <h4 class="title col-md-8"> Property Type :</h4>
                <span class="tag  col-md-4">{{Property_typeName}}</span>
            </section>
            <!-- <section class="titled">
                <h4 class="title col-md-8">Property Name :</h4>
                <span class="tag  col-md-4">{{Property_Name}}</span>
            </section> -->
            <section class="titled">
                <h4 class="title col-md-8">Description : </h4>
                <span class="tag  col-md-10">{{Desc}}</span>
            </section>
            <!-- <section class="titled">
                <h4 class="title col-md-8">Length :</h4>
                <span class="tag  col-md-4">{{Length}}</span>
            </section>
            <section class="titled">
                <h4 class="title col-md-8">Breadth : </h4>
                <span class="tag  col-md-4">{{Breadth}}</span>
            </section> -->
            <section class="titled">
                <h4 class="title col-md-8">Total Area (in sq.ft) :</h4>
                <span class="tag  col-md-12">{{TotalArea }} ({{Length}} x {{Breadth}})</span>
            </section>
            <section class="titled">
                <h4 class="title col-md-8">Rate (sq/ft) : </h4>
                <span class="tag  col-md-4">₹ {{Ratepersq_ft_toprint}}</span>
            </section>
            <section class="titled">
                <h4 class="title col-md-8">Total Price :</h4>
                <span class="tag  col-md-4"> ₹ {{priceToPrint}}</span>
            </section>
            
            <section class="titled">
                <h4 class="title col-md-8">Status : </h4>
                <span class="tag  col-md-4">{{Status}}</span>
            </section>
        </div>
    </div>
    <!-- View Property Template Ends Here -->

    <!-- Edit Property Template Starts Here -->
    <div class="row" *ngIf="edit">
        <div>
            <!-- <i class="pe-7s-close close-icon2" style="float: right;" (click)="close()"></i> -->
            <mat-icon class="close-icon2" (click)="close()"  style="float: right;">close</mat-icon>
        </div>
        <div class="tab-content">
            <div class="tab-pane tabs-animation fade show active" id="tab-content-0" role="tabpanel">
                <div class="row">
                    <div class="col-md-12">
                        <div class="main-card mb-3 card">
                            <div class="card-body">
                                <form [formGroup]="editPropertyForm" (ngSubmit)="submit(editPropertyForm.value)">
                                    <div class="row">
                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline" id="Project_name">
                                                <mat-label>Project<span class="starmandatory">*</span></mat-label>
                                                <mat-select formControlName="project_id" (selectionChange)="GetProject($event)">
                                                    <mat-option *ngFor="let project of projects" [value]="project.id">
                                                        {{project.name}}</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="editPropertyForm.get('project_id')?.touched">Project Name is required!</mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline" id="Property_type">
                                                <mat-label>Property Type<span class="starmandatory">*</span></mat-label>
                                                <mat-select formControlName="property_type_id">
                                                    <mat-option *ngFor="let type of new1p" [value]="type.id">
                                                        {{type.name}}</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="editPropertyForm.get('property_type_id')?.touched">
                                                    Property Name is required!</mat-error>
                                            </mat-form-field>
                                            <span id="emptyErr" style="display: none;">No property available in this project !</span>

                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Property Number<span class="starmandatory">*</span></mat-label>
                                                <input formControlName="number" matInput placeholder="Property Number">
                                                <mat-error *ngIf="editPropertyForm.get('number')?.touched">Property Number is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Total Area</mat-label>
                                                <input matInput  formControlName="property_size" placeholder="" id="area" (ngModelChange)="totalArea();" value={{area}}>
                                            </mat-form-field>
                                        </div>
                                        <!-- <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Property Name</mat-label>
                                                <input formControlName="name" matInput placeholder="Property Name">
                                                <mat-error *ngIf="editPropertyForm.get('name')?.touched">Property Name is required!</mat-error>
                                            </mat-form-field>
                                        </div> -->
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Length</mat-label>
                                                <input type="text" (keypress)="numberOnly($event)" matInput formControlName="length" placeholder="Length" (keyup)="getArea();" id="length">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-3 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Breadth</mat-label>
                                                <input matInput  (keypress)="numberOnly($event)" formControlName="breadth" placeholder="Breadth" (keyup)="getArea();" id="breadth">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Rate<span class="starmandatory">*</span></mat-label>
                                                <input matInput  (keypress)="numberOnly($event)" formControlName="rate_per_sq_ft" placeholder="Enter Rate" id="rate" value={{persqft}} (keyup)="getRatePerSqFt($event);">
                                                <mat-error *ngIf="editPropertyForm.get('rate_per_sq_ft')?.touched">Rate is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>

                                    <div class="row">
                                      
                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Total Amount<span class="starmandatory">*</span></mat-label>
                                                <input  (keypress)="numberOnly($event)"  matInput formControlName="price" placeholder="" value={{TotalAmt}} id="amount"  (keyup)="getPropertyPrice($event)">
                                                <mat-error *ngIf="editPropertyForm.get('price')?.touched">Amount is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>

                                        <div class="col-lg-6 col-sm-12 col-md-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Status<span class="starmandatory">*</span></mat-label>
                                                <mat-select (selectionChange)="getStatus($event)" formControlName="status">
                                                    <mat-option value="Booked">Booked</mat-option>
                                                    <mat-option value="Pre-Booked">Pre-Booked</mat-option>
                                                    <mat-option value="Registered">Registered</mat-option>
                                                    <mat-option value="Stock">Stock</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="editPropertyForm.get('status')?.touched">Status is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>


                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-lg-12">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Description</mat-label>
                                                <!-- <textarea matInput class="textarea1" formControlName="remark"></textarea> -->
                                                <textarea matInput formControlName="description" rows="1"></textarea>
                                                <!-- <input type="file" style="display: none;" multiple (change)="offerImage($event)" #file /> -->
                                                <input type="file" style="display: none;" (change)="offerImage($event)" class="form-control-file" id="exampleFormControlFile1" #file>
                                                <span class="material-icons" (click)="file.click()" style="float: right; position: relative;bottom:10px;right: 20px;;font-size: 20px;color:#68bfbb">
                                                    attach_file
                                                </span>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-2 doc-img-col" *ngFor='let img of UserPreviousImage; let i = index'>

                                            <img *ngIf="img.url; else elseBlock" class="doc-img" [style.display]="isImg" src="{{img.previewURL}}" title="" alt="" width="60" height="60">
                                            <ng-template #elseBlock> <img class="doc-img" [src]="img.previewURL" title="" alt="" width="60" height="60"></ng-template>

                                            <span>
                                                <mat-icon (click)="deleteImg(img)" class="close-btn">close</mat-icon>
                                            </span>
                                        </div>
                                    </div>
                                    <ng-container *ngFor="let feature of propertiesFeature"> 
                                    <button *ngIf="feature.update==true" type="submit" class="mt-1 btn btn-primary">Save</button>
                                    </ng-container>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Edit Property Template Ends Here -->

</div>